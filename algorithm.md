# アルゴリズム解説

この文書は bve-autopilot プラグインのアルゴリズム設計の解説です。開発者が本プラグインのコードを読解するための手掛かりとなることを意図しています。また、他の TASC/ATO プラグインの開発をしようとする人にとっても参考になるでしょう (ただし全てを自分で成し遂げたい人にとってはネタバレになるのでお帰りください)。

## TASC

### 減速度を一定に保つこと

TASC の目標は、ブレーキを制御して列車を所定の停止位置にできるだけ正確に止めることです。副次的な目標としては、できるだけブレーキを滑らかにかつ緩やかに制御するということが挙げられるかもしれません。この目標を達成するために最も重要な秘訣は、**ブレーキの減速度をなるべく一定に保つ**ことです。以下にその理由と方法を順に述べます。

BVE の車両プラグインは車両の減速度を直接に操作することはできず、あくまでもブレーキ指令のノッチを BVE 本体に伝えることができるだけです。プラグインがブレーキ指令を変更しても、その効果が表れるまで (つまりブレーキの減速度が変化するまで) には多少の時間差があります。またブレーキシリンダーの圧力やモーターの電流が一瞬でパッと変化するということはないので、減速度も多少の時間をかけてなだらかに変化します。もしプラグインが減速度を意図的に変化させようとする場合、このようなブレーキの応答の遅れを見越して早めにブレーキ指令を変化させるということをする必要がありますが、そのような計算を行うことはとても難しいのが現実です。特に、ブレーキ指令を変化させた効果が出る前に次のブレーキ指令を計算しなければならないという事実が状況を非常に複雑にしています。このような複雑で精度が低い計算を行わずに済むには、減速の途中で減速度を変化させるのをなるべく避けるのが賢明だということになります。

(不連続な計算式を避けること)

### 停止直前の挙動

## ATO

### ATC 路線

### 非 ATC 路線

## 発展的なブレーキ制御

### 空気ブレーキと電気ブレーキ

### ブレーキの利き具合への追随

### 抑速ブレーキ

### Pressure rates

### 拡張ブレーキ指令
