# bve-autopilot

Bve trainsim 5 用自動運転 ATS プラグインです。現時点では基本機能だけが実装されています。

- TASC
  - [x] ブレーキの自動制御
  - [x] 計器パネルへの動作状態の表示
- ATO
  - [x] 力行・ブレーキの自動制御
  - [ ] 信号速度の順守
  - [x] 制限速度の順守
  - [x] 計器パネルへの動作状態の表示

特定の路線・車両での動作を忠実に再現することよりも、どの路線・車両にも後付けで組み込んで自動運転化できるようなものを目指したいと思っています。

## 動作環境・開発環境

Bve trainsim 5.7.6224.40815 で動作確認しています。BVE4 や OpenBVE のことは知りません。DetailManager からの使用も可能ですが、他の保安装置プラグインとの同時使用については動作未確認です。

このプラグインを修正・改造する場合は最新の Visual Studio の使用を推奨します。

## 使用法

停止位置や制限速度をプラグインに伝えるために、[所定の地上子](https://github.com/magicant/bve-autopilot/wiki/%E5%9C%B0%E4%B8%8A%E5%AD%90%E4%BB%95%E6%A7%98)を路線に配置する必要があります。

保安装置 L のキー (デフォルトはテンキーでない方の `0`) でプラグインの状態を切り替えます。

- レバーサーを切にし非常ブレーキをかけた状態でキーを押すと「ATO と TASC 両方有効」「TASC のみ有効」「どちらも無効」の間で状態が切り替わります。
- TASC が有効な時、走行中に駅が近付くと自動的にブレーキがかかり停車します。その後レバーサー・マスコン・ブレーキレバーを操作するかドアが閉まるとブレーキが緩解します。
- ATO も有効な時、レバーサーを前進にしブレーキを緩めてからキーを押すと発進し自動運転が始まります。停車すると自動的にブレーキがかかります。

## 使用条件

このプラグインの使用条件は [LGPL 2.1](LICENSE) によります。つまり簡単に言うと

* プラグインとして車両データに組み込んで使うのは自由です。
* あなたがこのプラグインを修正・改造したものを公表しようとする場合、バイナリー (dll ファイル) だけでなくソースコードも公開する必要があります。そして公開されたものもまた LGPL に従わなければなりません。
  * せっかく GitHub で開発しているのだから役に立ちそうな修正はプルリクしてください。
